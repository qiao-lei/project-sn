"use strict";$(function(){$.getJSON("http://datainfo.duapp.com/shopdata/getCar.php?callback=?",{userID:$.cookie("username")},function(t){var n="";function a(){var t=0,e=0;$(".checkbox_c:checked").each(function(){t+=parseInt($(".num_shop").eq($(this).index(".checkbox_c")).val()),e+=parseFloat($(".p_price").eq($(this).index(".checkbox_c")).text())}),$(".num_all").text(t),$(".price_all").text(e)}$.each(t,function(t,e){var a=e.price*e.number;n+='<tr data-id="'+e.goodsID+'">\n\t\t\t\t\t<td><input class="checkbox_c" type="checkbox"/></td>\n\t\t\t\t\t<td><img src="'+e.goodsListImg+'"/>\n\t\t\t\t\t\t<p><a href="xiangxi.html?id='+e.goodsID+'">'+e.goodsName+'</a></p>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>111</td>\n\t\t\t\t\t<td><span class="d_price">'+e.price+'</span></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="num_hid">\n\t\t\t\t\t\t\t<a href="javascript:void(0)" class="addnum"></a>\n\t\t\t\t\t\t\t<input type="text" class="num_shop" value="'+e.number+'" disabled="disabled"/>\n\t\t\t\t\t\t\t<a href="javascript:void(0)" class="downnum"></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><span class="p_price">'+a+'</span></td>\n\t\t\t\t\t<td><a href="javascript:void(0)" class="delete_shop">移除</a></td>\n\t\t\t\t</tr>'}),$(".shop_list").append(n),$("input[type='checkbox']").prop("checked",!0),a(),$("#checkall").click(function(){$(".checkbox_c").prop("checked",$(this).prop("checked")),a()}),$(".checkbox_c").click(function(){$(".checkbox_c:checked").length==$(".checkbox_c").length?$("#checkall").prop("checked",!0):$("#checkall").prop("checked",!1),a()}),$(".downnum").click(function(){var t=$(".d_price").eq($(this).index(".downnum")).text(),e=$(this).prev().val();e++,$(this).prev().val(e),$(".p_price").eq($(this).index(".downnum")).text(parseFloat(t)*e),a()}),$(".addnum").click(function(){var t=$(".d_price").eq($(this).index(".addnum")).text(),e=$(this).next().val();--e<=0&&(e=0),$(this).next().val(e),$(".p_price").eq($(this).index(".addnum")).text(parseFloat(t)*e),a()}),$(".delete_shop").click(function(){$(this).parent().parent().remove();var t=$(this).parent().parent().attr("data-id");a(),$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:t,number:0},function(t){0==t&&location.reload()})}),$(".pay_pay").click(function(){$(".checkbox_c").each(function(){var t=$(this).parent().parent().attr("data-id"),e=$(this).parent().parent().find(".num_shop").val();$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:t,number:e},function(t){1==t&&alert("钱已付，坐等收货啦啦啦啦！"),0==t&&alert("付款失败！")})})})})}),$(function(){$("#wrap_foot").load("footer.html");var e=[{user:"aaaaa",pass:"aaaaa"},{user:"bbbbb",pass:"123123"}],a=/^[a-z0-9_-]{3,16}$/;$("#username").focus(function(){$("#errorname").text(""),a.test($(this).val())||$("#errorname").text("请输入以字母、数字、_开头的3到16位字符，不支持中文").css("color","#FF4400")}),$("#password").focus(function(){a.test($(this).val())||$("#errorpassword").text("请输入以字母、数字、_开头的5到16位字符，不支持中文").css("color","#FF4400")}),$("#username").focusout(function(){if(a.test($(this).val()))for(var t=0;t<e.length;t++){if(console.log($(this).val()==e[t].user),$(this).val()==e[t].user){$("#errorname").text("用户已存在！").css("color","red");break}$("#errorname").text(""),!0}else!1,$("#errorname").text("格式不正确！").css("color","red")}),$("#password").focusout(function(){a.test($(this).val())?($("#errorpassword").text(""),!0):(!1,$("#errorpassword").text("格式不正确！").css("color","red"))}),$("#tijao").click(function(){$.get("http://datainfo.duapp.com/shopdata/userinfo.php",{status:"register",userID:$("#username").val(),password:$("#password").val()},function(t){0==(t=JSON.parse(t))?$("#errorname").text("用户已存在！").css("color","red"):1==t?location.href="denglu.html":$("#zhucefm").hide().parent().append("<div><a href='zhuce.html'>注册失败，请重试！</a></div>").css({height:"100px",width:"990px","text-align":"center","font-size":"18px","line-height":"100px"})})}),$(".login_top a").eq(0).click(function(){$(this).addClass("checkon").siblings().removeClass("checkon"),$(".wx_dl").show(),$(".zh_dl").hide()}),$(".login_top a").eq(1).click(function(){$(this).addClass("checkon").siblings().removeClass("checkon"),$(".wx_dl").hide(),$(".zh_dl").show()}),$("#dlbtn").click(function(){$.get("http://datainfo.duapp.com/shopdata/userinfo.php",{status:"login",userID:$("#userdl").val(),password:$("#passworddl").val()},function(t){0==(t=JSON.parse(t))?$("#dlerrorname").text("此用户不存在！").css("color","red"):2==t?$("#dlerrorpassword").text("密码不对!").css("color","red"):($.cookie("username",t.userID,{expires:7,path:"/"}),location.href="index.html")})}),$("#userdl").focus(function(){$("#dlerrorname").text(""),$("#dlname label").css("background-position","-82px -67px").next().removeAttr("placeholder")}),$("#userdl").blur(function(){$("#dlname label").css("background-position","-123px -67px")}),$("#passworddl").focus(function(){$("#dlerrorpassword").text(""),$("#dlpassword label").css("background-position","-41px -67px").next().removeAttr("placeholder")}),$("#passworddl").blur(function(){$("#dlpassword label").css("background-position","0 -108px")}),$("#dl_wang a").eq(0).click(function(){$("#dlerrorname").text(""),$(this).hide().next().show(),$("#userdl").attr({placeholder:"手机号码"}),$("#passworddl").attr({placeholder:"短信验证码"}).parent().append("<a href='#'>获取验证码</a>")}),$("#dl_wang a").eq(1).click(function(){$("#dlerrorname").text(""),$(this).hide().prev().show(),$("#passworddl").parent().find("a").remove(),$("#userdl").attr({placeholder:"用户名/QQ/微信/易付宝"}),$("#passworddl").attr({placeholder:"密码"})})}),$(function(){var t=location.search.split("=")[1];$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",{goodsID:t},function(t){for(var e="",a=JSON.parse(t[0].imgsUrl),n=0;n<a.length;n++)e+='<img src="'+a[n]+'">';$(".bottom_pic").html(e),$(".min_pic").append('<img src="'+a[0]+'">'),$(".max_pic").append('<img src="'+a[0]+'">'),$(".bottom_pic>img").mouseover(function(){$(".min_pic>img").attr("src",$(this).attr("src")),$(".max_pic>img").attr("src",$(this).attr("src"))}),$(".xx_right").html('<p class="pname">'+t[0].goodsName+'</p><p class="pprice">￥'+t[0].price+"</p>").append('<div class="xx_shop">\n\t\t\t\t\t\n\t\t\t\t\t<div class="num_show"></div>\n\t\t\t\t\t<a href="#">加入购物车</a>\n\t\t\t\t</div>'),$(".xx_shop>a").click(function(){$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:t[0].goodsID},function(t){0==t&&alert("添加失败！"),1==t&&(location.href="cart.html")})})}),$(".min_pic").mouseenter(function(){$(".min_kuai").show(),$(".max_pic").show()}),$(".min_pic").mouseleave(function(){$(".min_kuai").hide(),$(".max_pic").hide()}),$(".min_pic").mousemove(function(t){var e=t||event,a=e.pageX-$(".list_xx")[0].offsetLeft,n=e.pageY-$(".list_xx")[0].offsetTop,s=a-$(".min_kuai")[0].offsetWidth/2,o=n-$(".min_kuai")[0].offsetHeight/2,i=$(".min_pic")[0].offsetWidth-$(".min_kuai")[0].offsetWidth,c=$(".min_pic")[0].offsetHeight-$(".min_kuai")[0].offsetHeight;s<=0&&(s=0),o<=0&&(o=0),i<=s&&(s=i),c<=o&&(o=c),$(".min_kuai")[0].style.left=s+"px",$(".min_kuai")[0].style.top=o+"px",$(".max_pic>img")[0].style.left=2*-s+"px",$(".max_pic>img")[0].style.top=2*-o+"px"})}),$(function(){$(".log_dl").text($.cookie("username")),$("#wrap_foot").load("footer.html"),$(".hoverul").mouseover(function(){$(this).children().eq(1).show()}),$(".hoverul").mouseout(function(){$(this).children().eq(1).hide()}),$(".brimg1").mouseenter(function(){$(this).parent().parent().stop().animate({width:$(".brimg2").outerWidth()+$(this).outerWidth()},500)}),$(".ban_right").mouseleave(function(){$(this).stop().animate({width:$(".brimg1").outerWidth()},500)}),$(window).scroll(function(){600<=$(this).scrollTop()?($(".header").show(),$(".floornav").show()):($(".header").hide(),$(".floornav").hide())}),$(".soso_result>i").click(function(){$(this).parent().hide()}),$("#soname").focus(function(){$(".soso_result").show()}),$("#soname").blur(function(){$(".soso_result").hide()}),$("#soname").on("input",function(){$(".result").html(""),$.ajax({type:"get",url:"https://ds.suning.cn/ds/his/new/-"+$(this).val()+"-0-1_0-autoComplateCallback_184b31b125a59d8c382d3d8382d23350.jsonp",dataType:"jsonp",jsonpCallback:"autoComplateCallback_184b31b125a59d8c382d3d8382d23350",async:!0,success:function(t){for(var e=0;e<t.words.length;e++){var a=$("<li></li>");a.append(t.words[e].keyname),$(".result").append(a)}}})}),$.ajax({type:"get",url:"https://lib.suning.com/homepage/model/homepage1_326191_lazyload326191.json",dataType:"jsonp",jsonpCallback:"lazyload326191",async:!0,success:function(t){$(".product_wrap").append(t.data),$("img").each(function(){$(this).attr("src",$(this).attr("lazy-src"))})}}),$.ajax({type:"get",url:"https://lib.suning.com/homepage/model/homepage1_326445_lazyload326445.json",dataType:"jsonp",jsonpCallback:"lazyload326445",async:!0,success:function(t){$(".meiwei_wrap").append(t.data),$("img").each(function(){$(this).attr("src",$(this).attr("lazy-src"))})}}),$.ajax({type:"get",url:"https://lib.suning.com/homepage/model/homepage1_326446_lazyload326446.json",dataType:"jsonp",jsonpCallback:"lazyload326446",async:!0,success:function(t){$(".mm_wrap").append(t.data),$("img").each(function(){$(this).attr("src",$(this).attr("lazy-src"))})}}),$.ajax({type:"get",url:"https://lib.suning.com/api/jsonp/cb/sortList_v6-threeSortLoad.jsonp",async:!0,dataType:"jsonp",jsonpCallback:"threeSortLoad",success:function(t){for(var s=t.allsort.nodes,e=0;e<s.length;e++){for(var a=$("<li><i></i></li>"),n=0;n<s[e].nodes[0].tag.length;n++)a.append("<a href='#'>"+s[e].nodes[0].tag[n].elementName+"</a><em>|&nbsp;</em>");$(".list_list").append(a).find("em").last().remove()}$(".list_list>li>em").last().remove(),$(".list_list>li").mouseenter(function(){$(".list_detal").html("").stop().animate({width:"999px"},300);for(var t=$(this).index(),e=$("<div class='detal_title'></div"),a=0;a<s[t].nodes[1].tag.length;a++)e.append("<a href='#'>"+s[t].nodes[1].tag[a].elementName+"</a>");var n=$("<ul class='detal_con'></ul>");$.get("http://datainfo.duapp.com/shopdata/getclass.php",function(t){t=JSON.parse(t);var a="";$.each(t,function(t,e){a+='<li><a href="list.html?classID='+e.classID+'">'+e.className+"<a></li>"}),n.html(a)}),$(".list_detal").append(e).append(n)}),$(".list_detal").mouseleave(function(){$(this).stop().animate({width:0},300)})}});var s=$("<ul></ul>");function a(t){var e=$("<li></li>");e.css("background",t[0].tone).append("<a href='#'><img src='"+t[0].adSrc+"'/><a>");for(var a=1;a<t.length;a++){var n=$("<div><div></div></div>");n.append("<a href='#'><p class='img_name'>"+t[a].title+"</p><p class='img_desc'>"+t[a].subtitle+"</p><img src='"+t[a].adSrc+"'/></a>"),e.append(n)}e.children().last().addClass("little"),s.append(e)}$(".ban_con").append(s);!function(t){for(var e=0;e<t.length;e++)$.ajax({type:"get",url:t[e],async:!0,dataType:"jsonp",success:function(t){a(t),$(".ban_nav").append("<a href='#'></a>"),$(".ban_nav a").eq(0).addClass("current")}})}(["https://th.suning.com/getCpmDatasGroup?pid=300000005&pid=100003449&pid=100003450&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000004&pid=100003446&pid=100003447&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000006&pid=100003452&pid=100003453&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000026&pid=100003455&pid=100003456&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000007&pid=100003449&pid=100003450&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000008&pid=100003446&pid=100003447&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000003&pid=100003452&pid=100003453&screenType=w","https://th.suning.com/getCpmDatasGroup?pid=300000026&pid=100003455&pid=100003456&screenType=w"]);var t=0;function e(){++t==$(".ban_con ul>li").length&&(t=0),-1==t&&(t=$(".ban_con ul>li").length-1),$(".ban_con ul>li").hide().eq(t).show(),$(".ban_nav a").removeClass("current").eq(t).addClass("current")}var n=setInterval(function(){e()},3e3);$(".banner").mouseover(function(){clearInterval(n),$(".ban_nav a").mouseover(function(){$(this).addClass("current"),t=$(this).index()-1,e()})}),$(".banner").mouseout(function(){n=setInterval(function(){e()},3e3)}),$(".btn_left").click(function(){t-=2,e()}),$(".btn_right").click(function(){e()})}),$(function(){$.ajax({type:"get",url:"https://ju.suning.com/ajax/getCommListForCmsJsonp_LFHFYSY__PC_15_yscb.html",dataType:"jsonp",jsonpCallback:"yscb",async:!0,success:function(t){for(var e=t.commInfoList,a=0;a<e.length;a++){var n=$("<li></li>");n.append('<a href="#">\n\t\t\t\t\t\t\t\t<img src="'+e[a].grppurDetailUrl+'"/>\n\t\t\t\t\t\t\t\t<p class="name">'+e[a].grppurName+'</p>\n\t\t\t\t\t\t\t\t<p class="ju_price">\n\t\t\t\t\t\t\t\t\t<span class="price">\n\t\t\t\t\t\t\t\t\t\t<i>￥</i>\n\t\t\t\t\t\t\t\t\t\t<em>'+e[a].gbPrice+'</em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<span class="line"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t'),$(".ju_ul").append(n)}$(".ju_ul").width(200*e.length)}}),function(){for(var t=0;t<6;t++){var e=$("<li></li>");e.append('\n\t\t\t\t<a href="#">\n\t\t\t\t\t<p>艾因儿童椅</p>\n\t\t\t\t\t<p>382人说好</p>\n\t\t\t\t\t<img src="https://image3.suning.cn/uimg/b2c/qrqm/0000000000000000000141604532_200x200.jpg?ver=2004&from=mobile"/>\n\t\t\t\t\t</a>\n\t\t\t\t'),$(".hh_ul").append(e)}$(".hh_ul li:odd").css("border-right","none")}(),$(".floornav a").click(function(){var t=$(this).index()+6;$(this).addClass("hover").siblings().removeClass("hover"),$("html,body").animate({scrollTop:$("body>div").eq(t).offset().top},500)}),$(".floornav div").click(function(){$("html,body").animate({scrollTop:0},500)})}),$(function(){$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",function(t){var a="";$.each(t,function(t,e){a+='<div>\n\t\t\t\t<a href="xiangxi.html?id='+e.goodsID+'">\n\t\t\t\t<img src="'+e.goodsListImg+'">\n\t\t\t\t<p>'+e.goodsName+"</p>\n\t\t\t\t</a>\n\t\t\t\t</div>"}),$(".listmore").append(a)});var t=location.search.split("=")[1];$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",{classID:t,goodsID:t},function(t){var a="";$.each(t,function(t,e){a+='<div>\n\t\t\t\t\t<a href="xiangxi.html?id='+e.goodsID+'">\n\t\t\t\t\t<img src="'+e.goodsListImg+'">\n\t\t\t\t\t<p>'+e.goodsName+"</p>\n\t\t\t\t\t</a>\n\t\t\t\t\t</div>"}),$(".listmore").prepend(a)})});